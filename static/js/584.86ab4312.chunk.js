"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[584],{584:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var r=t(43),o=t(722),a=t(555),s=t(579);const c=e=>{let{property:n}=e;const{_id:t,title:c,description:i,price:d,owner:p,comments:l=[]}=n,[m,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(l),[u,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),j="\u20b9".concat(d.toLocaleString());(0,r.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),n=b?"https://minor-project-kkof.onrender.com/properties/".concat(t,"/comments/friends"):"https://minor-project-kkof.onrender.com/properties/".concat(t),r=await o.A.get(n,{headers:{Authorization:"Bearer ".concat(e)}}),a=b?r.data:r.data.comments;g(a)}catch(e){console.error("Error fetching comments:",e)}})()},[t,b]);return(0,s.jsxs)("div",{className:"property-card",children:[(0,s.jsxs)("div",{className:"property-card-content",children:[(0,s.jsx)("h2",{className:"property-card-title",children:c}),(0,s.jsx)("p",{className:"property-card-description",children:i}),(0,s.jsxs)("p",{className:"property-card-price",children:["Price: ",j]}),(0,s.jsxs)("p",{className:"property-card-owner",children:["Owner: ",p.name," (",(0,s.jsx)("a",{href:"mailto:".concat(p.email),children:p.email}),")"]}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.trim()){f(!0);try{const e=localStorage.getItem("token"),n=await o.A.post("https://minor-project-kkof.onrender.com/properties/".concat(t,"/comment"),{text:m},{headers:{Authorization:"Bearer ".concat(e)}}),r=n.data[n.data.length-1];g(e=>[(0,a.A)((0,a.A)({},r),{},{text:m}),...e]),x("")}catch(n){console.error("Error posting comment:",n)}finally{f(!1)}}},className:"comment-form",children:[(0,s.jsx)("input",{type:"text",placeholder:"Add a comment...",value:m,onChange:e=>x(e.target.value),className:"comment-input",disabled:u}),(0,s.jsx)("button",{type:"submit",className:"comment-button",disabled:u,children:u?"Posting...":"Post"})]}),(0,s.jsx)("div",{style:{marginTop:"16px"},children:(0,s.jsxs)("label",{style:{fontWeight:"bold",marginRight:"8px"},children:[(0,s.jsx)("input",{type:"checkbox",checked:b,onChange:()=>y(e=>!e)})," Show only friends' comments"]})}),(0,s.jsxs)("div",{className:"comments-section",children:[(0,s.jsx)("h4",{children:"Comments:"}),0===h.length?(0,s.jsx)("p",{children:"No comments yet. Be the first to comment!"}):h.map((e,n)=>{var t;return(0,s.jsxs)("div",{className:"comment-item",children:[(0,s.jsxs)("strong",{children:[(null===(t=e.user)||void 0===t?void 0:t.name)||"Unknown User",":"]})," ",e.text]},n)})]})]}),(0,s.jsx)("style",{children:"\n        .property-card {\n          background-color: #fff;\n          border: 1px solid #ddd;\n          border-radius: 8px;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n          margin: 16px;\n          padding: 16px;\n          max-width: 400px;\n        }\n        .property-card-title {\n          font-size: 1.5em;\n          margin-bottom: 8px;\n          color: #333;\n        }\n        .property-card-description {\n          color: #555;\n          margin-bottom: 12px;\n        }\n        .property-card-price {\n          font-weight: bold;\n          color: #2e7d32;\n          margin-bottom: 8px;\n        }\n        .property-card-owner {\n          font-size: 0.9em;\n          color: #666;\n        }\n        .property-card-owner a {\n          color: #1a73e8;\n          text-decoration: none;\n        }\n        .property-card-owner a:hover {\n          text-decoration: underline;\n        }\n        .comment-form {\n          margin-top: 12px;\n          display: flex;\n          gap: 8px;\n        }\n        .comment-input {\n          flex: 1;\n          padding: 8px;\n          border-radius: 4px;\n          border: 1px solid #ccc;\n        }\n        .comment-button {\n          padding: 8px 16px;\n          background-color: #1a73e8;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .comment-button:hover {\n          background-color: #155ab6;\n        }\n        .comments-section {\n          margin-top: 16px;\n          max-height: 200px;\n          overflow-y: auto;\n          padding-right: 8px;\n        }\n        .comments-section::-webkit-scrollbar {\n          width: 6px;\n        }\n        .comments-section::-webkit-scrollbar-thumb {\n          background-color: rgba(0, 0, 0, 0.2);\n          border-radius: 4px;\n        }\n        .comment-item {\n          background: #f9f9f9;\n          padding: 8px;\n          margin-bottom: 6px;\n          border-radius: 4px;\n        }\n      "})]})},i=()=>(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"/loading-spinner.gif",alt:"",style:{width:"100px"}})}),d=()=>{const[e,n]=(0,r.useState)(!1),[t,a]=(0,r.useState)(""),[d,p]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{try{n(!0);const e=await o.A.get("https://minor-project-kkof.onrender.com/properties");console.log(e),p(e.data)}catch(e){console.error("Failed to fetch dummy properties:",e),a("Unable to load dummy properties.")}finally{n(!1)}})()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"real-estate-container",children:[(0,s.jsx)("h1",{className:"heading",children:"Properties"}),t&&(0,s.jsx)("div",{className:"error-message",style:{color:"red",textAlign:"center",marginTop:"10px"},children:t}),(0,s.jsx)("div",{className:"properties-container",children:e?(0,s.jsx)("div",{className:"loader",children:(0,s.jsx)(i,{})}):d.map(e=>(0,s.jsx)(c,{property:e},e._id))})]}),(0,s.jsx)("style",{jsx:!0,children:'\n        .real-estate-container {\n          padding: 20px;\n          background: #f9f9f9;\n          min-height: 100vh;\n        }\n\n        .heading {\n          text-align: center;\n          margin-bottom: 20px;\n          font-size: 32px;\n          font-family: "Poppins", sans-serif;\n          color: #333;\n        }\n\n        .properties-container {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 20px;\n          justify-content: center;\n        }\n\n        .loader {\n          text-align: center;\n          margin-top: 50px;\n        }\n      '})]})},p=()=>(0,s.jsx)("div",{children:(0,s.jsx)(d,{})})}}]);
//# sourceMappingURL=584.86ab4312.chunk.js.map